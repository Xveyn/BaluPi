import{j as s,g as v}from"./index-DD1S9ubv.js";import{a as j}from"./vendor-react-ZzjCT2KX.js";import{u as y}from"./vendor-i18n-DuW_MkEn.js";import"./vendor-icons-eCvzHHv5.js";import"./vendor-charts-Dce8K_o7.js";function S({duplicates:n,uploadFiles:o,onConfirm:b,onCancel:c}){const{t}=y(["fileManager"]),d=new Map;for(let e=0;e<o.length;e++)d.set(o[e].name,o[e].size);const[x,m]=j.useState(()=>{const e=new Map;for(const a of n)e.set(a.filename,"overwrite");return e}),f=(e,a)=>{m(l=>{const r=new Map(l);return r.set(e,a),r})},u=e=>{m(a=>{const l=new Map(a);for(const r of l.keys())l.set(r,e);return l})},h=()=>{const e=[];for(const[a,l]of x)e.push({filename:a,resolution:l});b(e)},p=[{value:"overwrite",label:t("fileManager:duplicates.overwrite")},{value:"skip",label:t("fileManager:duplicates.skip")},{value:"keep-both",label:t("fileManager:duplicates.keepBoth")}];return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:s.jsxs("div",{className:"w-full max-w-lg mx-4 rounded-2xl border border-slate-800/60 bg-slate-900/95 shadow-[0_20px_70px_rgba(0,0,0,0.5)]",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800/40 px-5 py-4",children:[s.jsx("h2",{className:"text-base font-semibold text-white",children:t("fileManager:duplicates.title")}),s.jsx("button",{onClick:c,className:"text-slate-400 hover:text-white transition-colors",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-5 pt-3 pb-1",children:s.jsx("p",{className:"text-sm text-slate-400",children:t("fileManager:duplicates.description")})}),n.length>1&&s.jsxs("div",{className:"px-5 py-2 flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs text-slate-500",children:[t("fileManager:duplicates.applyToAll"),":"]}),p.map(e=>s.jsx("button",{onClick:()=>u(e.value),className:"rounded-lg border border-slate-700/70 bg-slate-800/60 px-2.5 py-1 text-xs text-slate-300 hover:border-sky-500/40 hover:text-white transition-colors",children:e.label},e.value))]}),s.jsx("div",{className:"max-h-72 overflow-y-auto px-5 py-2 space-y-2",children:n.map(e=>{const a=d.get(e.filename),r=a!=null&&a===e.size_bytes&&e.checksum!=null,g=x.get(e.filename)??"overwrite";return s.jsxs("div",{className:"border border-slate-800/60 bg-slate-950/40 rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-200 truncate",children:e.filename}),s.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[s.jsx("span",{className:"text-[11px] text-slate-500",children:t("fileManager:duplicates.existingSize",{size:v(e.size_bytes)})}),s.jsx("span",{className:"text-[11px] text-slate-500",children:t("fileManager:duplicates.existingModified",{date:new Date(e.modified_at).toLocaleDateString()})})]})]}),r&&s.jsx("span",{className:"shrink-0 rounded-md border border-amber-500/30 bg-amber-500/10 px-2 py-0.5 text-[10px] font-semibold text-amber-400",children:t("fileManager:duplicates.likelyIdentical")})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:p.map(i=>s.jsx("button",{onClick:()=>f(e.filename,i.value),className:`rounded-lg border px-3 py-1.5 text-xs font-medium transition-colors ${g===i.value?"border-sky-500/60 bg-sky-500/20 text-sky-300":"border-slate-700/70 bg-slate-800/40 text-slate-400 hover:text-slate-200 hover:border-slate-600"}`,children:i.label},i.value))})]},e.filename)})}),s.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-slate-800/40 px-5 py-4",children:[s.jsx("button",{onClick:c,className:"rounded-xl border border-slate-700/70 bg-slate-800/60 px-4 py-2 text-sm font-medium text-slate-300 hover:text-white transition-colors",children:t("fileManager:duplicates.cancel")}),s.jsx("button",{onClick:h,className:"rounded-xl border border-sky-500/40 bg-sky-500/20 px-4 py-2 text-sm font-medium text-sky-300 hover:bg-sky-500/30 transition-colors",children:t("fileManager:duplicates.proceed")})]})]})})}export{S as DuplicateDialog};
